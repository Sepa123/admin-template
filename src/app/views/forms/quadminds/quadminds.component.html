
<c-container>
  <h2>Quadminds</h2>

  <c-modal id="liveDemoModal" [visible]="visibleEstadoCarga" (visibleChange)="handleLiveEstadoCarga($event)">
    <c-modal-header>
      estatus carga archivo
      <button (click)="toggleEstadoCarga()" cButtonClose></button>
    </c-modal-header>
    <c-modal-body>

      <h5>
        <!-- cil-find-in-page -->
        <svg xmlns="http://www.w3.org/2000/svg" height="27px" viewBox="0 0 24 24"><path fill="black" d="M20 19.59V8l-6-6H4v20l15.57-.02l-4.81-4.81c-.8.52-1.74.83-2.76.83c-2.76 0-5-2.24-5-5s2.24-5 5-5s5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3s-1.34-3-3-3s-3 1.34-3 3z"/></svg>
                Carga de archivo 
        <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 448 512" class="svgT"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>
      </h5>
      <h5>
        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 640 512">
          <path d="M48 0C21.5 0 0 21.5 0 48V368c0 26.5 21.5 48 48 48H64c0 53 43 96 96 96s96-43 96-96H384c0 53 43 96 96 96s96-43 96-96h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V288 256 237.3c0-17-6.7-33.3-18.7-45.3L512 114.7c-12-12-28.3-18.7-45.3-18.7H416V48c0-26.5-21.5-48-48-48H48zM416 160h50.7L544 237.3V256H416V160zM112 416a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm368-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"/>
        </svg>
        Generación Rutas Hela
        <svg *ngIf="error == 0" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 448 512" class="svgT"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>
        <svg *ngIf="error == 1" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 384 512" class="svgF"><path d="M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"/></svg>  
      </h5>
      {{message}}
      <div class="greenTable">
        <table *ngIf="error == 1">
          <thead>
            <tr>
              <th>Codigos</th>
              <th></th>
            <tr>
          </thead>
          <tbody>
            <tr *ngFor="let codigo of codigosErroneos">
              <th style="font-size: 14px;">{{codigo}}</th>
              <td>
                <svg class="svgF" xmlns="http://www.w3.org/2000/svg" height="1.25em" viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>
              </td>
            </tr>
          </tbody>
          
        </table>
      </div>

    </c-modal-body>
    <c-modal-footer>
      <button (click)="toggleEstadoCarga()" cButton color="secondary">
        Cerrar
      </button>
    </c-modal-footer>
  </c-modal>

  <!-- <button (click)="toggleLiveDemo()">Mostrar Pantalla</button> -->

<div class="card" *ngIf="loadingQuadmind == false ">
  <table >
    <tr>
      <td rowspan="4"><img src="https://assets.cdn.filesafe.space/tF9c2jBpFvuLonRAo55I/media/6400dd9ccb1935638e8d82cd.jpeg" alt="" width="150" height="150"></td>
    </tr>
    <tr>
      <td class="tamano">Cargar Archivo resultante desde <span style="font-weight: bold;">Quadminds</span> : Debe ser una descarga con detalle de Producto</td>
    </tr>
    <tr>
      <td>
          <input *ngIf="termino" type="file" id="archivo" (change)="onFileSelected($event)">
      <p></p>
          <button *ngIf="termino" (click)="uploadFile()">Subir archivo</button>
      </td>
    </tr>
    <tr>
      <td  class="tamano">
        Este Archivo generará nuevas rutas para la fecha asignada por Quadminds, por lo que será necesario revisar en el apartado rutas activas,
        editando la ruta para cambiar la fecha en caso de ser necesario
      </td>
    </tr>
  </table>
</div>

<table class="loadQuadmind" *ngIf="!termino"> 
    <tr>
        <div>
            <img width="50" height="50" src="../../../assets/images/loading-gif.gif" />
            Cargando datos hacia Hades
        </div>
    </tr> 
    </table>
    <p></p>
    <p *ngIf="loadingQuadmind == false">Descargar Archivo para planificar en <span style="font-weight: bold;">Quadminds</span>
      <img  *ngIf="loadQuadmindFull == true" width="50" height="50" src="../../../assets/images/loading-gif.gif" />
    </p>
    
    <p></p>
    <p></p>

  <div *ngIf="loadingQuadmind == false" class="card">
    <c-row [xs]="1"> 
      <c-col>
        <p></p>
        <table>
          <tr>
            <td>
              <c-dropdown >
                <button cButton cDropdownToggle color="secondary" size="sm">
                  Región
                </button>
                <ul cDropdownMenu>
                  <li (click)="fullQuadmind()"><a [routerLink]="[]"  cDropdownItem>Todos</a></li>
                  <li *ngFor="let comuna of comunas" (click)="filterByRegion(comuna)"><a [routerLink]="[]"  cDropdownItem>{{comuna}}</a></li>
                </ul>
              </c-dropdown>
            </td>
            <td>
              <button cButton size="sm" color="success" (click)="downloadExcel()" >Descargar    
                <svg class="dExcel" xmlns="http://www.w3.org/2000/svg" height="1.5em" viewBox="0 0 384 512">
                  <path d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM155.7 250.2L192 302.1l36.3-51.9c7.6-10.9 22.6-13.5 33.4-5.9s13.5 22.6 5.9 33.4L221.3 344l46.4 66.2c7.6 10.9 5 25.8-5.9 33.4s-25.8 5-33.4-5.9L192 385.8l-36.3 51.9c-7.6 10.9-22.6 13.5-33.4 5.9s-13.5-22.6-5.9-33.4L162.7 344l-46.4-66.2c-7.6-10.9-5-25.8 5.9-33.4s25.8-5 33.4 5.9z"/>
                </svg>
              </button>
            </td>
          </tr>
        </table>
          <p></p>
      </c-col>
      <c-col>
        <div class="greenTable" >
       <table id="tablaProductosPicking" >
        <thead>
          <tr>
              <!-- <th>Código de Cliente</th>
              <th>Nombre</th> -->
              <th>Calle y Número</th>
              <th>Ciudad</th>
              <th>Provincia/Estado</th>
              <!-- <th>Latitud</th>
              <th>Longitud</th> -->
              <th>Teléfono</th>
              <!-- <th>Email</th> -->
              <th>Código de Pedido</th>
              <th>Fecha de Pedido</th>
              <th>Operación E/R </th>
              <th>Código de Producto</th>
              <th>Descripción del Producto</th>
              <th>Cantidad de Producto</th>
              <!-- <th>Peso</th>
              <th>Volumen</th>
              <th>Dinero</th>
              <th>Duración min</th>
              <th>Ventana horaria 1</th>
              <th>Ventana horaria 2</th> -->
              <th>Notas</th>
              <th>Agrupador</th>
              <!-- <th>Email de Remitentes</th>
              <th>Eliminar Pedido</th>
              <th>Vehículo</th>
              <th>Habilidades</th> -->
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let quadmind of tablaQuadmind ;let i = index ">
            <!-- <td>{{quadmind.Codigo_cliente}}</td>
            <td>{{quadmind.Nombre}}</td> -->
            <td>{{quadmind.Calle}}</td>
            <td>{{quadmind.Ciudad}}</td>
            <td>{{quadmind.Provincia}}</td>
            <!-- <td>{{quadmind.Latitud}}</td>
            <td>{{quadmind.Longitud}}</td> -->
            <td>{{quadmind.Telefono}}</td>
            <!-- <td>{{quadmind.Email}}</td> -->
            <td>{{quadmind.Codigo_pedido}}</td>
            
            <td>{{quadmind.Fecha_pedido}}</td>
            <td>{{quadmind.Operacion}}</td>
            <!-- <td>{{quadmind.Codigo_producto}}</td> -->
            <td>
              <table>
                <tr *ngFor="let codigo of quadmind.arrayCodigo">
                  {{codigo}}
                </tr>
              </table>
            </td>
            <!-- <td>{{quadmind.Descripcion_producto}}</td> -->
            <td>
              <table class="noclass">
                <tr *ngFor="let descripcion of quadmind.arrayDescripcion" class="noclass">
                  {{descripcion}}
                </tr>
              </table>
            </td>
            <td>{{quadmind.Cantidad_producto}}</td>
            <!-- <td>{{quadmind.Peso}}</td>
            <td>{{quadmind.Volumen}}</td>
            <td>{{quadmind.Dinero}}</td>
            <td>{{quadmind.Duracion_min}}</td>
            <td>{{quadmind.Ventana_horaria_1}}</td>
            <td>{{quadmind.Ventana_horaria_2}}</td> -->
            <td>{{quadmind.Notas}}</td>
            <td>{{quadmind.Agrupador}}</td>
            <!-- <td>{{quadmind.Email_remitentes}}</td>
            <td>{{quadmind.Eliminar_pedido}}</td>
            <td>{{quadmind.Vehiculo}}</td>
            <td>{{quadmind.Habilidades}}</td> -->
            </tr>
        </tbody>
        </table>
      </div>
      </c-col>
      <c-col>
        <p></p>
    </c-col>  
    </c-row>
    <c-row>
    </c-row>
  </div>

  <table class="loadQuadmind" > 
    <tr>
       <div *ngIf="loadingQuadmind">
         <img width="50" height="50" src="../../../assets/images/loading-gif.gif" />
         Cargando Datos desde Hades
     </div>
    </tr> 
   </table>
  </c-container>